language: java
jdk: openjdk8
cache:
  directories:
  - $HOME/.m2
install: true
env:
  global:
  - DATE=`date +"%Y-%m-%d-%H%M"`
  - HERE_TOKEN_ENDPOINT_URL="https://stg.account.api.here.com/oauth2/token"
  - secure: t4JWkYSYbGS/c3JAazST1jmmi1OtZ07X0cmriFxQz0uLLJUifRF3wz2LaKbBC4RoW2reZaFiMon2gd5cy8HEaG1ZruoPzeHEMvsLe9QLegswj0U0d8k3V0Ncd9pknFL9/JI0RTAdCDQ28VfWX0PfY+5HDbYsixoF+9gZv3NED+3r772IqZTMkvhQEU7kT/AwcLXxw2fRr+iKjB7Qr5GLtZkHOhrPekX/4VQRRhTlImPDf4f3PdYawuBqZaLVATbqFedlE92m0tn6rtkHXRv/+rspWTprrBwmeuj6qPtVvTkI9kbvyaPLrHRvvPhROsf0iQuKsRGrO54jktZ/9lDTFhhkmkf4xYb2Hicpmh6soI/c4iR7niVDBDDseT8HonTgM+rtdgMBYeQnJrge0POUQTV1iSV8PCm5I1e1jN3ZTbY8S2bhEL55/UaB1MOf6rbEvxdBspE0Z2DBNHLZb7nML5+pJ3iNeuiYO2ujivTJMbiisEYxb3psF+tjNEfMfFlgwgX7d6julJeKpGSiwxBZWcmI02q8HZoC8f7DQhuw9Ybq0Qv5Akc7fmtY6acs1FlsO+z4sB5FqtEyvAH1OnqerEoRaL86ijAR4QcFINJJeoNWopzgGwBhL873dXFojSAMZ+6bS6OVO+C+pCrWCCeXXfmaafoytnC9Ev/wIO74NZ8=
  - secure: AMWoPS0zBzIoyJR64QJh8IxZmhhjtdSH+T+2zQdUpQZqeUfIEEwIVlmkLwOiJWRKJcVALu+qUmrTfRwCtRRl5ed2GqWYqLpRDUJO6FP+nwowqyL0YA8wyWbxJ4PpD4T/8rfDRQ7vP+h2G/8B6+qbKfrsttsLay/wd+DzwxZWcxVgrcuIiRJ0aAj3BkLkIlvnVWcOxwnBvUcA89MlQF2UYE2VAoiaSve8RD1ZMbdb4tqBQLJbp1q8/3H4YFEbMoaqemBh24Heopsd4oxfI08fcCnwEagaeG/8dmV/jnd+wEURr126zgDOowgCKwWUolY4lcIeAeJbm7uMdNWJmnCTKiQHFM1M1w9zTuLrv0A56DeSBuXkVYWV1oDnerTPBRTxwcroSVc4n2L1az3U/j5vhshRerPU3EFpoyDKgaxUJpUQMC+Bjqqog/urZYDlcj2cuXMeuoTpciFGXjLCehhaM+9mdOmo1peT3fT2VaI844R8Yc4HsuDmE+SoHUPSVF0JxUQVNDVBU7KGqpXeGUyEVewFWLiBdtx2aLd3Jy1PxUT7MxDleyOIdIhkEGMGytmyISXPm5nMRfLfFzwe93x7nOEV7PBSKOQprGYHMKh4X7QQ1wQosZekUb6FP30xaRevGgHkmnzMCzPAd+uX84IywqPLrVcZANQq4KpS3KUkuUw=
  - VERACODE_WRAPPER_VERSION=20.3.6.1
  - VERACODE_WRAPPER_SHA1=c5480e2d26c8ccaa063b437cbc4177c93e85afda
  - secure: "h3pIaRtJHYio4yToAnanRexsyVmzw8Me44RqhuhBuzZJ9LokPytUl58Ulzz+tTBGGqDn9i0BgF+HKbcqt+gdmJ4CiWtuQ7YG3DpwvhhNDXjQCxI1i+9fCqAaR1XkbO1uqEKyIW8IBMo8FG1AacEi8EtCVQZ26xa7med1697KEU2X99VgYJht549EqQr/h95PGNkAC1duXu37oIoW68mIuuRJhT5nGDxOjo5bEys826W8rLj7hDHeeg0cz5JbrMChuNYZ3KfRxG7HhVMWmZEZt36oav7aJsfByxM8d+XQWPiXmpStReGT8CJWCgDPh67S1IWB6ESCdufuHAYQaZC80XyPdtfG1fpj3NpqHXEySQAqM0lWiudcNv1vmU2fB5EJkRSp5Clfd9K2Ojetm/lF52dK6psXnpaRf9peBWD75OxIof6NQCd05gbBkALPIhL6dJNXsManodWj40vIl+pyTRaThsBL4TKkEa3lc5u50BzftBF3wQ6F7MCWZqfUY6knEGIO+UQRhQMEgw8VhnBWCnWZemotBX5ycTF8akDOHPgnxKjf0isPWM8G4oW2W1uFfyUBIHQyUXuv/TZnZuqtBieVLQ3r1rLQZ1aLi/niZ2LbOtpczItq4vIxenBqYJefHWSQIT/v2eN45MO/Z/CkwJsp95cMHEaLI/On1WwOzr4="
  - secure: "qxei+kB/0jhLIUUO3pcXbU47mEv+Lru+ALiuvofMdOlBx6LGmqGr26OV3cedTvtYykHlx2Fdo/AMbn3/OVjzZDFjnuYMOA9xTwgJcGhQRrv9LCRomfFtCYJK+gneZX+onFacKqdVvHmyJdRuRbaO70cN9V0PlKtfyixH+xhohRUbEF931klOChyCOl1gv95sFtI7MgghO+/YiTvHpJ1W4PkptptwCmY7BPrykQ982r8GZzEK7Zkq2dVD+8q9Q+oMYtwrX8y3j33WqCMh61i+qJC4wSfBqNt5Nxt/mLdssIQx34FvG41vMiYKKqJaeC1GfPOuMH2t6fKT5tGvakWBHUc+ZKSd7TgxXW3VucEz/e3xJKxyuOF4OHr4bM6Xmo7vo/mEwa3s5tkNu7z5hzIxupncZgp/Agkg8xhiCnP4q73ZMDUDfikIHXg+cUaRLBUBbbHHKfn16UqTWCpmR3Ev2BKmItxVw1klH305iG+4rP1u2QoFI0hudjttApYLDvMyptttAkOMGtwSzEVSGXPO+NkxkijfAG9RQm4L6TTzvdoItOdR4+aXUqJteR1Va4uhli+JhcgKLCjGW6JlF+8skx4Cb6jPV0HJVeP2DhGq/Fqj/l770nzG6CZnB/hGTsPmm+Z7YtfHUfaqp2z9t43Xx8SiShseJMBDql85ZUewXqk="
  - secure: "Cd/xfJqQkOnot+Xp+p2sfPQH/UKReVXKysigBZA+in06BEov4YV28NhJ/jTg8hqWS5qp9OugEaoWZ0sE3EEa3BTEViPndUCw8CaEGK74JdtNAtDNDAlBP4jzk4zho+fILokkneBHN5WD9CL+I1yU4zkWr/6wlGPglX5PyK7vR5wxWvsnWDNfl11U6UZbJ2v/EMrcK9p4IyFcXRQCFIn4oLrlPIolwNFgQnlsL9lFIovWCpccKuyotvq0tDyjASt+XJKTbq7N9W9jJcHqOM0Wic3uMheE5jIQB2Fw0agLb/CkRCqvM1ACVCCOPsHZLI1UeiY32JIajv72ZMPvIgOSG5g0gKfdfRNwIh6QVESPLx8tfDyGWfsipufU5WhbFNcdMy0TI6miQvGpM/GTOM6qAKGY4vz3BDyOisl2cAcRZWTSVo2MeQ6f1tx8n5zJtMqD3f5VzPZjf1p/zolk4BS3lG57GvhYvbzO9ye6+xIsiI3IzD+cTkzLSy6r3DS8MyWHxhiYQZ2Oq0+Vh7hxVUoR+JBLrVXx/rwsBeNlf5XEvIJV5C25dW0+EeP7uWJqblj9/ah5Zl3JW8nlagr5aITY9a9L93ikPW9diNNXaZNrGAZsk9RzSX3rHhzX/e6wcYrpWMDfeZWearGRlYbLsgH6xlpcR78xoOoDB2VuJnKnihM="

before_install:
  - wget https://repo1.maven.org/maven2/com/veracode/vosp/api/wrappers/vosp-api-wrappers-java/$VERACODE_WRAPPER_VERSION/vosp-api-wrappers-java-$VERACODE_WRAPPER_VERSION.jar
  - sha1sum -c <<< "$VERACODE_WRAPPER_SHA1 vosp-api-wrappers-java-$VERACODE_WRAPPER_VERSION.jar"

script:
  - mvn -version
  - mvn -Dhere.token.endpoint.url=$HERE_TOKEN_ENDPOINT_URL -Dhere.access.key.id=$ACCESS_KEY_ID -Dhere.access.key.secret=$ACCESS_KEY_SECRET clean install
  - rc=$?
  - java -jar vosp-api-wrappers-java-$VERACODE_WRAPPER_VERSION.jar -appid $VERACODE_APP_ID -vid $VERACODE_USER_ID -vkey $VERACODE_SECRET_KEY -action UploadAndScan -appname AAA-SDK -createprofile false -autoscan true -scantimeout 10000 -filepath here-oauth-client/target/here-oauth-client-*-SNAPSHOT.jar -version "$TRAVIS_JOB_ID - $TRAVIS_JOB_NUMBER $DATE"
  - exit $rc
